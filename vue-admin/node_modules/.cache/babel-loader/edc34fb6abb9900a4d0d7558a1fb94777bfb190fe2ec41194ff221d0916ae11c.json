{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport { setRoutes } from \"@/router\";\nexport default {\n  name: `Login`,\n  data() {\n    return {\n      btn: '获取验证码',\n      time: 60,\n      buttonDisabled: false,\n      user: {\n        username: 'admin',\n        password: 'admin',\n        code: ''\n      },\n      rules: {\n        username: [{\n          required: true,\n          message: '请输入用户名',\n          trigger: 'blur'\n        }, {\n          min: 3,\n          max: 5,\n          message: '长度在 3 到 5 个字符',\n          trigger: 'blur'\n        }],\n        password: [{\n          required: true,\n          message: '请输入密码',\n          trigger: 'blur'\n        }, {\n          min: 3,\n          max: 6,\n          message: '长度在 3 到 5 个字符',\n          trigger: 'blur'\n        }],\n        code: [{\n          required: true,\n          message: '验证码为空',\n          trigger: 'blur'\n        }]\n      }\n    };\n  },\n  created() {\n    this.getCode();\n  },\n  methods: {\n    getCode() {\n      document.getElementById(\"code\").src = \"http://localhost:8082/captcha/code?time=\" + new Date().getTime();\n    },\n    login() {\n      this.$refs['user'].validate(valid => {\n        if (valid) {\n          this.request.post(\"/user/login\", this.user).then(res => {\n            if (res.code === '200') {\n              localStorage.setItem(\"user\", JSON.stringify(res.data));\n              localStorage.setItem(\"menus\", JSON.stringify(res.data.menus));\n              // 当前用户的动态路由\n              setRoutes();\n              this.$router.push('/');\n              this.$message.success(\"登录成功\");\n            } else {\n              this.$message.error(res.msg);\n            }\n          });\n        }\n      });\n    }\n  }\n};","map":{"version":3,"names":["setRoutes","name","data","btn","time","buttonDisabled","user","username","password","code","rules","required","message","trigger","min","max","created","getCode","methods","document","getElementById","src","Date","getTime","login","$refs","validate","valid","request","post","then","res","localStorage","setItem","JSON","stringify","menus","$router","push","$message","success","error","msg"],"sources":["src/views/Login.vue"],"sourcesContent":["<template>\r\n    <div class=\"wrapper\">\r\n        <div class=\"form\">\r\n            <div style=\"margin: 20px auto;text-align: center;font-size: 24px\"><b>登 录</b></div>\r\n            <el-form :model=\"user\" :rules=\"rules\" ref=\"user\">\r\n                <el-form-item prop=\"username\">\r\n                    <el-input size=\"medium\" style=\"margin: 10px 0\" prefix-icon=\"el-icon-user\" clearable\r\n                              v-model=\"user.username\"></el-input>\r\n                </el-form-item>\r\n                <el-form-item prop=\"password\">\r\n                    <el-input size=\"medium\" style=\"margin: 5px 0\" prefix-icon=\"el-icon-lock\" clearable show-password\r\n                              v-model=\"user.password\"></el-input>\r\n                </el-form-item>\r\n                <el-form-item prop=\"code\">\r\n                    <el-input\r\n                            v-model=\"user.code\"\r\n                            auto-complete=\"off\"\r\n                            placeholder=\"验证码\"\r\n                            maxlength=\"4\"\r\n                            clearable\r\n                            style=\"width: 45%\"\r\n                    >\r\n                    </el-input>\r\n                    <div class=\"login-code\">\r\n                        <img id=\"code\" src=\"http://localhost:8082/captcha/code\" alt=\"加载失败\" @click=\"getCode\"\r\n                             class=\"login-code-img\"/>\r\n                    </div>\r\n                </el-form-item>\r\n                <el-form-item style=\"margin: 10px 0;text-align: right\">\r\n                    <el-checkbox style=\"float: left;color: #fff\">记住我</el-checkbox>\r\n                    <el-button type=\"primary\" size=\"small\" autocomplete=\"off\" @click=\"login\">登录</el-button>\r\n                    <el-button type=\"warning\" size=\"small\" autocomplete=\"off\" @click=\"$router.push('/register')\">注册\r\n                    </el-button>\r\n                </el-form-item>\r\n            </el-form>\r\n\r\n        </div>\r\n    </div>\r\n</template>\r\n\r\n<script>\r\nimport {setRoutes} from \"@/router\";\r\n\r\nexport default {\r\n    name: `Login`,\r\n    data() {\r\n        return {\r\n            btn:'获取验证码',\r\n            time : 60,\r\n            buttonDisabled : false,\r\n            user: {\r\n                username: 'admin',\r\n                password: 'admin',\r\n                code: '',\r\n            },\r\n            rules: {\r\n                username: [\r\n                    {required: true, message: '请输入用户名', trigger: 'blur'},\r\n                    {min: 3, max: 5, message: '长度在 3 到 5 个字符', trigger: 'blur'}\r\n                ],\r\n                password: [\r\n                    {required: true, message: '请输入密码', trigger: 'blur'},\r\n                    {min: 3, max: 6, message: '长度在 3 到 5 个字符', trigger: 'blur'}\r\n                ],\r\n                code: [\r\n                    {required: true, message: '验证码为空', trigger: 'blur'},\r\n                ]\r\n            }\r\n        }\r\n    },\r\n    created() {\r\n       this.getCode();\r\n    },\r\n    methods: {\r\n        getCode() {\r\n            document.getElementById(\"code\").src = \"http://localhost:8082/captcha/code?time=\" + new Date().getTime();\r\n        },\r\n        login() {\r\n            this.$refs['user'].validate((valid) => {\r\n                if (valid) {\r\n                    this.request.post(\"/user/login\", this.user).then(res => {\r\n                        if (res.code === '200') {\r\n                            localStorage.setItem(\"user\", JSON.stringify(res.data));\r\n                            localStorage.setItem(\"menus\", JSON.stringify(res.data.menus));\r\n                            // 当前用户的动态路由\r\n                            setRoutes();\r\n                            this.$router.push('/');\r\n                            this.$message.success(\"登录成功\");\r\n                        } else {\r\n                            this.$message.error(res.msg)\r\n                        }\r\n                    })\r\n                }\r\n            });\r\n\r\n        }\r\n    }\r\n}\r\n</script>\r\n\r\n<style lang=\"scss\">\r\n.form {\r\n    margin: 200px auto;\r\n    /*background-color: #fff;*/\r\n    width: 350px;\r\n    height: 40%;\r\n    padding: 20px;\r\n    border-radius: 10px;\r\n    /*opacity: 0.5;*/\r\n    /* 为其整体设置接近透明的效果*/\r\n    background-color: rgba(255, 255, 255, 0.1);\r\n    /* 设置box-shadow使其有立体感 */\r\n    box-shadow: 5px 5px 0 0 rgba(0, 0, 0, 0.2);\r\n}\r\n\r\n.login-code {\r\n    width: 33%;\r\n    height: 38px;\r\n    float: right;\r\n\r\n    img {\r\n        cursor: pointer;\r\n        vertical-align: middle;\r\n    }\r\n}\r\n\r\n.login-code img {\r\n    width: 100%;\r\n    height: 38px;\r\n}\r\n\r\n.el-textarea__inner, .el-input__inner {\r\n    background: transparent !important;\r\n}\r\n.el-checkbox__input.is-checked {\r\n    color: red !important;\r\n}\r\n.el-input input {\r\n    color: #fff !important;\r\n}\r\n\r\n.wrapper {\r\n    height: 100vh;\r\n    background-image: linear-gradient(15deg, #13547a 0%, #80d0c7 100%);\r\n    overflow: hidden;\r\n}\r\n</style>"],"mappings":";AAyCA,SAAAA,SAAA;AAEA;EACAC,IAAA;EACAC,KAAA;IACA;MACAC,GAAA;MACAC,IAAA;MACAC,cAAA;MACAC,IAAA;QACAC,QAAA;QACAC,QAAA;QACAC,IAAA;MACA;MACAC,KAAA;QACAH,QAAA,GACA;UAAAI,QAAA;UAAAC,OAAA;UAAAC,OAAA;QAAA,GACA;UAAAC,GAAA;UAAAC,GAAA;UAAAH,OAAA;UAAAC,OAAA;QAAA,EACA;QACAL,QAAA,GACA;UAAAG,QAAA;UAAAC,OAAA;UAAAC,OAAA;QAAA,GACA;UAAAC,GAAA;UAAAC,GAAA;UAAAH,OAAA;UAAAC,OAAA;QAAA,EACA;QACAJ,IAAA,GACA;UAAAE,QAAA;UAAAC,OAAA;UAAAC,OAAA;QAAA;MAEA;IACA;EACA;EACAG,QAAA;IACA,KAAAC,OAAA;EACA;EACAC,OAAA;IACAD,QAAA;MACAE,QAAA,CAAAC,cAAA,SAAAC,GAAA,oDAAAC,IAAA,GAAAC,OAAA;IACA;IACAC,MAAA;MACA,KAAAC,KAAA,SAAAC,QAAA,CAAAC,KAAA;QACA,IAAAA,KAAA;UACA,KAAAC,OAAA,CAAAC,IAAA,qBAAAvB,IAAA,EAAAwB,IAAA,CAAAC,GAAA;YACA,IAAAA,GAAA,CAAAtB,IAAA;cACAuB,YAAA,CAAAC,OAAA,SAAAC,IAAA,CAAAC,SAAA,CAAAJ,GAAA,CAAA7B,IAAA;cACA8B,YAAA,CAAAC,OAAA,UAAAC,IAAA,CAAAC,SAAA,CAAAJ,GAAA,CAAA7B,IAAA,CAAAkC,KAAA;cACA;cACApC,SAAA;cACA,KAAAqC,OAAA,CAAAC,IAAA;cACA,KAAAC,QAAA,CAAAC,OAAA;YACA;cACA,KAAAD,QAAA,CAAAE,KAAA,CAAAV,GAAA,CAAAW,GAAA;YACA;UACA;QACA;MACA;IAEA;EACA;AACA"},"metadata":{},"sourceType":"module","externalDependencies":[]}